<html>
  <head>
    <script src="jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

    
      var source = $.getJSON("data.json", function(json) { source = json; });
      
      google.load('visualization', '1.0', {'packages':['corechart', 'table', 'charteditor']});
      google.setOnLoadCallback(drawChart);
      
      function drawChart() {

                
        console.log(source);
        var dataTable = new google.visualization.DataTable();
        dataTable.addColumn('date', 'Date');
        dataTable.addColumn('number', 'Impressions');
        
        for (var i = 0; i < source.length; ++i) {
          dataTable.addRow([new Date(source[i].time), source[i].hits]);
        }

        
        // http://code.google.com/apis/chart/interactive/docs/customizing_axes.html#Discrete_vs_Continuous
        var dataView = new google.visualization.DataView(dataTable);
        dataView.setColumns([
          { calc: function(data, row) { return data.getFormattedValue(row, 0); }
          , type: 'string' }, 1 ]);

        var options = {
          width: 400, 
          height: 240,
          title: 'Impression vs Time Line Chart',
          allowHtml: true, 
          legend: 'none'
        };
        

         var chart = new google.visualization.LineChart(document.getElementById('graph'));
        chart.draw(dataView, options);
      }
      
   
    </script>
  </head>

  <body>
    <div id="graph"></div>
  </body>
</html>
